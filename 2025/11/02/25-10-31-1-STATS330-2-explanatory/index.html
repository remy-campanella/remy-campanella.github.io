<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>【STATS 330】 Handout 2 Explanatory Terms and Interpretation | remy-campanella.github.io</title><meta name="author" content="Remy Campanella"><meta name="copyright" content="Remy Campanella"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Intepretation: Numeric Explanatory Variables Linear Regression \[ y_i &#x3D; \beta_0 + \beta_1 x_i + \epsilon_i \\\\ \epsilon \sim {\rm iid \ Normal}(0, \sigma_i^2) \]  When \(x\) is zero, the exp">
<meta property="og:type" content="article">
<meta property="og:title" content="【STATS 330】 Handout 2 Explanatory Terms and Interpretation">
<meta property="og:url" content="https://remy-campanella.github.io/2025/11/02/25-10-31-1-STATS330-2-explanatory/index.html">
<meta property="og:site_name" content="remy-campanella.github.io">
<meta property="og:description" content="Intepretation: Numeric Explanatory Variables Linear Regression \[ y_i &#x3D; \beta_0 + \beta_1 x_i + \epsilon_i \\\\ \epsilon \sim {\rm iid \ Normal}(0, \sigma_i^2) \]  When \(x\) is zero, the exp">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://remy-campanella.github.io/image/background/remy.jpg">
<meta property="article:published_time" content="2025-11-02T08:32:07.000Z">
<meta property="article:modified_time" content="2025-11-02T08:43:43.403Z">
<meta property="article:author" content="Remy Campanella">
<meta property="article:tag" content="学习笔记">
<meta property="article:tag" content="统计学">
<meta property="article:tag" content="R 语言">
<meta property="article:tag" content="数据科学">
<meta property="article:tag" content="奥克兰大学—西南大学合作课程">
<meta property="article:tag" content="外文">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://remy-campanella.github.io/image/background/remy.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "【STATS 330】 Handout 2 Explanatory Terms and Interpretation",
  "url": "https://remy-campanella.github.io/2025/11/02/25-10-31-1-STATS330-2-explanatory/",
  "image": "https://remy-campanella.github.io/image/background/remy.jpg",
  "datePublished": "2025-11-02T08:32:07.000Z",
  "dateModified": "2025-11-02T08:43:43.403Z",
  "author": [
    {
      "@type": "Person",
      "name": "Remy Campanella",
      "url": "https://remy-campanella.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/image/icon/icon.png"><link rel="canonical" href="https://remy-campanella.github.io/2025/11/02/25-10-31-1-STATS330-2-explanatory/index.html"><link rel="preconnect" href="https://unpkg.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free@7.0.1/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://unpkg.com/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '【STATS 330】 Handout 2 Explanatory Terms and Interpretation',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/scripts/css/font.css"><!-- hexo injector head_end start -->
    <link rel="stylesheet" href="/css/gallery.css" media="print" onload="this.media='all'">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/image/icon/loading.gif" data-original="/image/icon/Cover.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">61</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/categories"><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/archives"><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags"><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/about"><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/album"><span> 图库</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/image/background/remy.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/image/icon/loading.gif" data-original="/image/icon/icon.png" alt="Logo"><span class="site-name">remy-campanella.github.io</span></a><a class="nav-page-title" href="/"><span class="site-name">【STATS 330】 Handout 2 Explanatory Terms and Interpretation</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/categories"><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/archives"><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags"><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/about"><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/album"><span> 图库</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">【STATS 330】 Handout 2 Explanatory Terms and Interpretation</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-11-02T08:32:07.000Z" title="发表于 2025-11-02 16:32:07">2025-11-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-11-02T08:43:43.403Z" title="更新于 2025-11-02 16:43:43">2025-11-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF/%E5%AD%A6%E4%B9%A0/">学习</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF/%E5%AD%A6%E4%B9%A0/STATS-330-Application-and-Practice-of-Statistics/">STATS 330 Application and Practice of Statistics</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="intepretation-numeric-explanatory-variables">Intepretation:
Numeric Explanatory Variables</h2>
<h3 id="linear-regression">Linear Regression</h3>
<p><span class="math display">\[
y_i = \beta_0 + \beta_1 x_i + \epsilon_i \\\\
\epsilon \sim {\rm iid \ Normal}(0, \sigma_i^2)
\]</span></p>
<ul>
<li>When <span class="math inline">\(x\)</span> is zero, <strong>the
expected value of the response</strong> is <span
class="math inline">\(\beta_0\)</span>.</li>
<li>For every <strong>one-unit</strong> increase in <span
class="math inline">\(x\)</span>, <strong>the expected value</strong> of
the response increases by <span
class="math inline">\(\beta_1\)</span>.</li>
</ul>
<h3 id="poisson-regression">Poisson Regression</h3>
<p><span class="math display">\[
\log(\mu_i) = \beta_0 + \beta_1 x_i \\\\
Y_i \sim {\rm Poisson}(\mu_i)
\]</span></p>
<ul>
<li>When <span class="math inline">\(x\)</span> is zero, <strong>the
expected value of the response</strong> is <span
class="math inline">\(\beta_0\)</span>.</li>
<li>For every <strong>one-unit</strong> increase in <span
class="math inline">\(x\)</span>, <strong>the log of the expected
value</strong> of the response increases by <span
class="math inline">\(\beta_1\)</span>(or increases <strong>by</strong>
<span class="math inline">\(100[\exp(\beta_1) - 1]\%\)</span>).</li>
<li>For every <strong><span
class="math inline">\(n\)</span>-unit</strong> increase in <span
class="math inline">\(x\)</span>, <strong>the expected value</strong> of
the response in <strong>multiplied</strong> by <span
class="math inline">\(\exp(n \beta_1)\)</span>.</li>
</ul>
<h3 id="logistic-regression">Logistic Regression</h3>
<p><span class="math display">\[
{\rm logit}(p_i) = \log(\frac{p_i}{1 - p_i}) = \beta_0 + \beta_i x_i
\\\\
Y_i \sim {\rm Binomial}(n_i, p_i)
\]</span></p>
<ul>
<li>When <span class="math inline">\(x\)</span> is zero, the
<strong>log-odds</strong> of success are equal to <span
class="math inline">\(\beta_0\)</span>.</li>
<li>For every <strong>one-unit</strong> increase in <span
class="math inline">\(x\)</span>, the <strong>log-odds</strong> of
success increase by <span class="math inline">\(\beta_1\)</span>(or
increases <strong>by</strong> <span
class="math inline">\(100[\exp(\beta_1) - 1]\%\)</span>).</li>
<li>For every <strong>n-unit</strong> increase in <span
class="math inline">\(x\)</span>, the odds of success are
<strong>multiplied</strong> by <span
class="math inline">\(\exp(n\beta_1)\)</span>.</li>
</ul>
<h2 id="intepretation-factors">Intepretation: Factors</h2>
<h3 id="single-variable-model">Single-Variable Model</h3>
<p>To fit a model with <span class="math inline">\(k\)</span>th factors,
we include <span class="math inline">\(k - 1\)</span> dummy variables.
For example, if we have a factor with levels <span
class="math inline">\(A\)</span>, <span
class="math inline">\(B\)</span>, <span
class="math inline">\(C\)</span>, and <span
class="math inline">\(D\)</span>, then<br />
<span class="math display">\[
g(\theta_i) = \beta_0 + \beta_1 b_i + \beta_2 c_i + \beta_3 d_i
\]</span> where - <span class="math inline">\(b_i = 1\)</span> if the
<span class="math inline">\(i\)</span>th observation has level <span
class="math inline">\(B\)</span>, otherwise <span
class="math inline">\(b_i = 0\)</span>; - <span
class="math inline">\(c_i = 1\)</span> if the <span
class="math inline">\(i\)</span>th observation has level <span
class="math inline">\(C\)</span>, otherwise <span
class="math inline">\(c_i = 0\)</span>; - <span
class="math inline">\(d_i = 1\)</span> if the <span
class="math inline">\(i\)</span>th observation has level <span
class="math inline">\(D\)</span>, otherwise <span
class="math inline">\(d_i = 0\)</span>;</p>
<p>In general, - <span class="math inline">\(\beta_0\)</span> is the
value of <span class="math inline">\(g(\theta)\)</span> for observations
with the baseline level(level <span class="math inline">\(A\)</span>
here), and - The coefficient of the dummy variable for the <span
class="math inline">\(j\)</span>th level is the difference in <span
class="math inline">\(g(\theta)\)</span> between observations with the
<span class="math inline">\(j\)</span>th level and those with the
baseline level.</p>
<blockquote>
<p><strong>Caution</strong>:<br />
R automatically chooses the <strong>alphabetically</strong> first factor
to be the baseline.<br />
To cuntomize the settings, please use:<br />
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f <span class="operator">&lt;-</span> factor<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;A&quot;</span><span class="punctuation">,</span> <span class="string">&quot;B&quot;</span><span class="punctuation">,</span> <span class="string">&quot;C&quot;</span><span class="punctuation">,</span> <span class="string">&quot;A&quot;</span><span class="punctuation">,</span> <span class="string">&quot;B&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">f <span class="operator">&lt;-</span> factor<span class="punctuation">(</span>f<span class="punctuation">,</span> levels <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;B&quot;</span><span class="punctuation">,</span> <span class="string">&quot;A&quot;</span><span class="punctuation">,</span> <span class="string">&quot;C&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure> Then do the model building normally.</p>
</blockquote>
<p>A word of warning: - If we wish to determine if a factor is related
to the response variable, we should use the <code>anova()</code>
function, rather than relying on the p-values in the
<code>summary()</code> table. - It is possible for all p-values in the
<code>summary()</code> to be large, even though there is evidence of
differences between some of the levels of the factor. - This is because
the <code>summary()</code> table only compares the baseline level to
others. There may be no evidence of differences from the baseline level,
<strong>but there may be evidence of differences between non-baseline
levels</strong>.</p>
<h3 id="multiple-variable-model">Multiple-Variable Model</h3>
<p>For example<br />
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fit <span class="operator">=</span> glm<span class="punctuation">(</span>mo <span class="operator">~</span> dose <span class="operator">+</span> weight<span class="punctuation">,</span> family <span class="operator">=</span> <span class="string">&quot;poisson&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure> where <code>dose</code> is factorial and
<code>weight</code> is numeric.</p>
<p>Interpretation is the same as for a single-variable model, but must
acknowledge that the statements only hold if all other variables in the
model are <strong>kept constant</strong>.</p>
<p>Please refer page 44(old) or page 172(new) for anaiysis code.</p>
<h2 id="inteepretation-interactions">Inteepretation: Interactions</h2>
<p><span class="math display">\[
g(\theta_i) = \beta_0 + \beta_1 w_i + \beta_2 h_i + \beta_3 l_i +
\beta_4 w_ih_i + \beta_5 w_il_i + \beta_6 h_il_i
\]</span><br />
We will have an interaction term for every possible pair of terms that
can be enumerated by taking a main effect from each variable.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fit <span class="operator">=</span> glm<span class="punctuation">(</span>y <span class="operator">~</span> w <span class="operator">+</span> h <span class="operator">+</span> l <span class="operator">+</span> w<span class="operator">:</span>h <span class="operator">+</span> w<span class="operator">:</span>l <span class="operator">+</span> h<span class="operator">:</span>l<span class="punctuation">)</span></span><br><span class="line">fit <span class="operator">=</span> glm<span class="punctuation">(</span>y <span class="operator">~</span> w <span class="operator">*</span> h <span class="operator">*</span> l<span class="punctuation">)</span> <span class="comment"># for short.</span></span><br></pre></td></tr></table></figure>
<p>We can interpret the main effects in the same way as we can for
models that do not have an interaction, but these interpretations only
hold - At the <strong>baseline level</strong> of the other variable, if
the other variable is a <strong>factor</strong>; or - When the other
variable is <strong>equal to zero</strong>, if the other variable is
<strong>numeric</strong>. This is not necessarily sensible to
interpret.</p>
<h2 id="other-model-statement-syntax">Other Model Statement Syntax</h2>
<p>If you don’t want to include an intercept term, you can use -1 in
your model statement. For example, the code below will fit a linear
model assuming <span class="math inline">\(\mu_i = \beta_1 x_i\)</span>.
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fit <span class="operator">=</span> lm<span class="punctuation">(</span>y <span class="operator">~</span> <span class="operator">-</span><span class="number">1</span> <span class="operator">+</span> x<span class="punctuation">,</span> data <span class="operator">=</span> df<span class="punctuation">)</span></span><br></pre></td></tr></table></figure></p>
<h2 id="offsets">Offsets</h2>
<p>Sometimes a variable has <strong>a known relationship</strong> with
the response variable such that its estimation of its effect is
<strong>not necessary</strong>. In this scenario we can sometimes use an
offset.</p>
<h3 id="linear-regression-1">Linear Regression</h3>
<p>From the example in textbook page 50(old) or page 194(new): <span
class="math display">\[
\mu_i = \beta_0 + \beta_i south_i + shoe_i
\]</span> where <span class="math inline">\(shoe\)</span> is an offset,
because the increases of <span class="math inline">\(\mu\)</span> and
<span class="math inline">\(shoe\)</span> are obvoiusly synchronous.</p>
<p>An offset can be thought of as a variable in the linear combination
that does not have a coefficient to be estimated, or, equivalently, has
a coefficient fixed at 1.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fit <span class="operator">=</span> lm<span class="punctuation">(</span>height <span class="operator">~</span> island<span class="punctuation">,</span> offset <span class="operator">=</span> shoe<span class="punctuation">,</span> data <span class="operator">=</span> height.df<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<h3 id="poisson-regression-1">Poisson Regression</h3>
<p>Offsets are most commonly used in Poisson regression, because they
allow us to incorporate variables that measures the “exposure” of each
observation to the events being counted.</p>
<p>From the example on textbook page 202(new) or page 52(old): <span
class="math display">\[
\log(\mu_i) = \beta_0 + \beta_1 t_i + \ldots + \log(s_i) \\\\
Y_i \sim {\rm Poisson}(\mu_i)
\]</span> where <span class="math inline">\(\log(s_i)\)</span> is an
offset.</p>
<h2 id="other-glm-arguments">Other <code>glm()</code> Arguments</h2>
<h3 id="subset"><code>subset</code></h3>
<p>The subset function allows us to fit our model to only <strong>a
subset of the observations</strong> in a data frame. Similarly to
subsetting vectors in R, this can be done by <strong>position</strong>
or via a <strong>logical statement</strong>.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fit <span class="operator">=</span> glm<span class="punctuation">(</span>incidents <span class="operator">~</span> time <span class="operator">+</span> type<span class="punctuation">,</span> offset <span class="operator">=</span> <span class="built_in">log</span><span class="punctuation">(</span>service<span class="punctuation">)</span><span class="punctuation">,</span> family <span class="operator">=</span> <span class="string">&quot;poisson&quot;</span><span class="punctuation">,</span> data <span class="operator">=</span> ships.df<span class="punctuation">,</span> subset <span class="operator">=</span> <span class="operator">-</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">17</span><span class="punctuation">,</span> <span class="number">23</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">fit <span class="operator">=</span> glm<span class="punctuation">(</span>incidents <span class="operator">~</span> time <span class="operator">+</span> type<span class="punctuation">,</span> offset <span class="operator">=</span> <span class="built_in">log</span><span class="punctuation">(</span>service<span class="punctuation">)</span><span class="punctuation">,</span> family <span class="operator">=</span> <span class="string">&quot;poisson&quot;</span><span class="punctuation">,</span> data <span class="operator">=</span> ships.df<span class="punctuation">,</span> subset <span class="operator">=</span> <span class="punctuation">(</span>type <span class="operator">!=</span> <span class="string">&quot;D&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<h3 id="na.action"><code>na.action</code></h3>
<p>The <code>na.action</code> argument controls what happens if you try
to fit a model to a data set with missing values.</p>
<ul>
<li><code>na.action = na.omit</code> will remove any observations with
<strong>missing values</strong> and fit the model. This is sensible
enough, but you might not realise this has happened.</li>
<li><code>na.action = na.fail</code> will result in <code>glm()</code>
<strong>returning an error</strong> if there are any missing
values.</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://remy-campanella.github.io">Remy Campanella</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://remy-campanella.github.io/2025/11/02/25-10-31-1-STATS330-2-explanatory/">https://remy-campanella.github.io/2025/11/02/25-10-31-1-STATS330-2-explanatory/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://remy-campanella.github.io" target="_blank">remy-campanella.github.io</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><a class="post-meta__tags" href="/tags/%E7%BB%9F%E8%AE%A1%E5%AD%A6/">统计学</a><a class="post-meta__tags" href="/tags/R-%E8%AF%AD%E8%A8%80/">R 语言</a><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6/">数据科学</a><a class="post-meta__tags" href="/tags/%E5%A5%A5%E5%85%8B%E5%85%B0%E5%A4%A7%E5%AD%A6%E2%80%94%E8%A5%BF%E5%8D%97%E5%A4%A7%E5%AD%A6%E5%90%88%E4%BD%9C%E8%AF%BE%E7%A8%8B/">奥克兰大学—西南大学合作课程</a><a class="post-meta__tags" href="/tags/%E5%A4%96%E6%96%87/">外文</a></div><div class="post-share"><div class="social-share" data-image="/image/background/remy.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://unpkg.com/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://unpkg.com/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/10/31/25-10-16-1-STATS330-1-synthesis-glm/" title="【STATS 330】 Handout 1 A Synthesis of Generalised Linear Models"><img class="cover" src="/image/icon/loading.gif" data-original="/image/background/remy.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">【STATS 330】 Handout 1 A Synthesis of Generalised Linear Models</div></div><div class="info-2"><div class="info-item-1">Linear Regression Simple linear regression model is: \[ y_i = \beta_0 + \beta_1 x_i + \epsilon_i \\\\ \epsilon_i \sim {\rm iid \ Normal(0, \sigma^2)} \] Poisson Linear Regression Macrorhabdus Ornithogaster Chicken Analysis Textbook Page 23:     Macrorhabdus Ornithogaster Chicken Data    Data Suitable for Using Poisson Distribution The Poisson distribution better reflects the nature of the response: - It is a discrete distribution - It is right skewed (but almost symmetric...</div></div></div></a><a class="pagination-related" href="/2025/11/02/25-11-2-1-STATS330-3-param-esti/" title="【STATS 330】 Handout 3 Parameter Estimation for Generalised Linear Models"><img class="cover" src="/image/icon/loading.gif" data-original="/image/background/remy.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">【STATS 330】 Handout 3 Parameter Estimation for Generalised Linear Models</div></div><div class="info-2"><div class="info-item-1">Parameter Estimation Parameter estimation involves determining values for a model’s coefficients (or “parameters”) that “best” fit the data at hand.  For linear regression models, we can use the sum of the squared residuals(\(RSS\)). For generalised linear models, we can use the likelihood function(\(L(p;x)\)).  Least Squares Estimation The residual sum of squares is given by \[ RSS = \sum_{i = 1}^n (y_i - \hat{\mu_i})^2 \] The lower the \(RSS\) is, the “better” the candidate s...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/10/31/25-10-16-1-STATS330-1-synthesis-glm/" title="【STATS 330】 Handout 1 A Synthesis of Generalised Linear Models"><img class="cover" src="/image/icon/loading.gif" data-original="/image/background/remy.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-31</div><div class="info-item-2">【STATS 330】 Handout 1 A Synthesis of Generalised Linear Models</div></div><div class="info-2"><div class="info-item-1">Linear Regression Simple linear regression model is: \[ y_i = \beta_0 + \beta_1 x_i + \epsilon_i \\\\ \epsilon_i \sim {\rm iid \ Normal(0, \sigma^2)} \] Poisson Linear Regression Macrorhabdus Ornithogaster Chicken Analysis Textbook Page 23:     Macrorhabdus Ornithogaster Chicken Data    Data Suitable for Using Poisson Distribution The Poisson distribution better reflects the nature of the response: - It is a discrete distribution - It is right skewed (but almost symmetric...</div></div></div></a><a class="pagination-related" href="/2025/10/20/25-10-16-1-STATS330-intro/" title="【STATS 330】 Introduction"><img class="cover" src="/image/icon/loading.gif" data-original="/image/background/remy.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-20</div><div class="info-item-2">【STATS 330】 Introduction</div></div><div class="info-2"><div class="info-item-1">This course is about statistical modelling. We will expand on the generalised linear model (GLM) encountered in STATS 201/8. It comprises four parts:  Generalised linear models Simulation and bootstrapping Regression models for prediction Regression models for explanation  This course provides a versatile statistical toolbox that is useful in a range of fields, including almost all subjects in business and economics, along with experimental or social science. Course Link Prof. J...</div></div></div></a><a class="pagination-related" href="/2025/11/02/25-11-2-1-STATS330-3-param-esti/" title="【STATS 330】 Handout 3 Parameter Estimation for Generalised Linear Models"><img class="cover" src="/image/icon/loading.gif" data-original="/image/background/remy.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-02</div><div class="info-item-2">【STATS 330】 Handout 3 Parameter Estimation for Generalised Linear Models</div></div><div class="info-2"><div class="info-item-1">Parameter Estimation Parameter estimation involves determining values for a model’s coefficients (or “parameters”) that “best” fit the data at hand.  For linear regression models, we can use the sum of the squared residuals(\(RSS\)). For generalised linear models, we can use the likelihood function(\(L(p;x)\)).  Least Squares Estimation The residual sum of squares is given by \[ RSS = \sum_{i = 1}^n (y_i - \hat{\mu_i})^2 \] The lower the \(RSS\) is, the “better” the candidate s...</div></div></div></a><a class="pagination-related" href="/2025/11/30/25-11-30-2-STATS330-5-devi-as-gof/" title="【STATS 330】 Handout 5 Deviance as A Goodness-of-fit Statistic"><img class="cover" src="/image/icon/loading.gif" data-original="/image/background/remy.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-30</div><div class="info-item-2">【STATS 330】 Handout 5 Deviance as A Goodness-of-fit Statistic</div></div><div class="info-2"><div class="info-item-1">Goodness-of-fit What is it actually? Deviance as A Goodness-of-fit Statistic A large deviance could indicate lack-of-fit. How large is too large? - If the model is correct, then, under certain conditions, the deviance comes from a \(\chi_{n - k}^2\), where \(n\) is the number of observations and \(k\) is the number of coefficients. - If it is plausible that the deviance could have come from this distribution, we have no evidence against the hypothesis that our model is correct. - I...</div></div></div></a><a class="pagination-related" href="/2025/11/30/25-11-30-1-STATS330-4-deviance/" title="【STATS 330】 Handout 4 Deviance"><img class="cover" src="/image/icon/loading.gif" data-original="/image/background/remy.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-30</div><div class="info-item-2">【STATS 330】 Handout 4 Deviance</div></div><div class="info-2"><div class="info-item-1">Goodness-of-fit “Goodness-of-fit” is a property that describes how well the data appear to fit the model assumptions. For a GLM, they are: - The observations are independent. - \(g(\boldsymbol{\theta}) = \boldsymbol{X \beta}\); after applying the link function, the parameter of interest is a linear combination of the explanatory terms. - Each response comes from the assumed distribution. Model Complexity, Residual Sum of Squares, and Likelihood Increasing a model’s complexity will ...</div></div></div></a><a class="pagination-related" href="/2025/12/25/25-11-10-1-COMPSCI220-14-connectivity/" title="【COMPSCI 220】 Lecture 14 Connectivity and Components"><img class="cover" src="/image/icon/loading.gif" data-original="/image/background/remy.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-12-25</div><div class="info-item-2">【COMPSCI 220】 Lecture 14 Connectivity and Components</div></div><div class="info-2"><div class="info-item-1">Subgraph  Subgraph  Let \(E \subseteq V^2\), \(V&#39; \subseteq V\),       \(E \upharpoonright V&#39; = \{(u, v ) \in E | u, v \in V&#39;\}\)(all edges that is used by \(V&#39;\) in \(G\)).     A subgraph of \(G = (V, E)\) is a diagraph \(G&#39; = (V&#39;, E&#39;)\) where \(V&#39; \subseteq V\) and \(E&#39; \subseteq E \upharpoonright V&#39;\).     If \(E&#39; = E \upharpoonright V&#39;\), then the subgraph is an induced subgraph.    Decomposing Undirected Grap...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/image/icon/loading.gif" data-original="/image/icon/Cover.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Remy Campanella</div><div class="author-info-description">A Remy Campanella blog website on Github.</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">61</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/remy-campanella"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">网站介绍帖、自我介绍帖内容已移至“关于”页面，目录帖内容已移至“分类”页面。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#intepretation-numeric-explanatory-variables"><span class="toc-number">1.</span> <span class="toc-text">Intepretation:
Numeric Explanatory Variables</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#linear-regression"><span class="toc-number">1.1.</span> <span class="toc-text">Linear Regression</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#poisson-regression"><span class="toc-number">1.2.</span> <span class="toc-text">Poisson Regression</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#logistic-regression"><span class="toc-number">1.3.</span> <span class="toc-text">Logistic Regression</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#intepretation-factors"><span class="toc-number">2.</span> <span class="toc-text">Intepretation: Factors</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#single-variable-model"><span class="toc-number">2.1.</span> <span class="toc-text">Single-Variable Model</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#multiple-variable-model"><span class="toc-number">2.2.</span> <span class="toc-text">Multiple-Variable Model</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#inteepretation-interactions"><span class="toc-number">3.</span> <span class="toc-text">Inteepretation: Interactions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#other-model-statement-syntax"><span class="toc-number">4.</span> <span class="toc-text">Other Model Statement Syntax</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#offsets"><span class="toc-number">5.</span> <span class="toc-text">Offsets</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#linear-regression-1"><span class="toc-number">5.1.</span> <span class="toc-text">Linear Regression</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#poisson-regression-1"><span class="toc-number">5.2.</span> <span class="toc-text">Poisson Regression</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#other-glm-arguments"><span class="toc-number">6.</span> <span class="toc-text">Other glm() Arguments</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#subset"><span class="toc-number">6.1.</span> <span class="toc-text">subset</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#na.action"><span class="toc-number">6.2.</span> <span class="toc-text">na.action</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/12/26/25-11-20-1-COMPSCI220-22-flow-net/" title="【COMPSCI 220】 Lecture 22 Flow Network"><img src="/image/icon/loading.gif" data-original="/image/background/remy.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【COMPSCI 220】 Lecture 22 Flow Network"/></a><div class="content"><a class="title" href="/2025/12/26/25-11-20-1-COMPSCI220-22-flow-net/" title="【COMPSCI 220】 Lecture 22 Flow Network">【COMPSCI 220】 Lecture 22 Flow Network</a><time datetime="2025-12-26T13:22:55.000Z" title="发表于 2025-12-26 21:22:55">2025-12-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/26/25-12-26-3-COMPSCI220-21a-practical-dyn-prog/" title="【COMPSCI 220】 Lecture 21a Practical Exercises of Dynamic Programming"><img src="/image/icon/loading.gif" data-original="/image/background/remy.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【COMPSCI 220】 Lecture 21a Practical Exercises of Dynamic Programming"/></a><div class="content"><a class="title" href="/2025/12/26/25-12-26-3-COMPSCI220-21a-practical-dyn-prog/" title="【COMPSCI 220】 Lecture 21a Practical Exercises of Dynamic Programming">【COMPSCI 220】 Lecture 21a Practical Exercises of Dynamic Programming</a><time datetime="2025-12-26T12:03:44.000Z" title="发表于 2025-12-26 20:03:44">2025-12-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/26/25-11-19-3-COMPSCI220-21-dyn-prog/" title="【COMPSCI 220】 Lecture 21 Dynamic Programming"><img src="/image/icon/loading.gif" data-original="/image/background/remy.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【COMPSCI 220】 Lecture 21 Dynamic Programming"/></a><div class="content"><a class="title" href="/2025/12/26/25-11-19-3-COMPSCI220-21-dyn-prog/" title="【COMPSCI 220】 Lecture 21 Dynamic Programming">【COMPSCI 220】 Lecture 21 Dynamic Programming</a><time datetime="2025-12-26T09:56:12.000Z" title="发表于 2025-12-26 17:56:12">2025-12-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/26/25-12-26-2-COMPSCI220-20a-practical-graph/" title="【COMPSCI 220】 Lecture 20a Practical Exercises of Graph"><img src="/image/icon/loading.gif" data-original="/image/background/remy.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【COMPSCI 220】 Lecture 20a Practical Exercises of Graph"/></a><div class="content"><a class="title" href="/2025/12/26/25-12-26-2-COMPSCI220-20a-practical-graph/" title="【COMPSCI 220】 Lecture 20a Practical Exercises of Graph">【COMPSCI 220】 Lecture 20a Practical Exercises of Graph</a><time datetime="2025-12-26T08:18:47.000Z" title="发表于 2025-12-26 16:18:47">2025-12-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/26/25-11-17-2-COMPSCI220-20-short-path/" title="【COMPSCI 220】 Lecture 20 Shortest Paths, Revisited"><img src="/image/icon/loading.gif" data-original="/image/background/remy.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【COMPSCI 220】 Lecture 20 Shortest Paths, Revisited"/></a><div class="content"><a class="title" href="/2025/12/26/25-11-17-2-COMPSCI220-20-short-path/" title="【COMPSCI 220】 Lecture 20 Shortest Paths, Revisited">【COMPSCI 220】 Lecture 20 Shortest Paths, Revisited</a><time datetime="2025-12-26T07:16:53.000Z" title="发表于 2025-12-26 15:16:53">2025-12-26</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By Remy Campanella</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.0</a></span></div><div class="footer_custom_text">源代码库版本 1.4.0</div></div><script type="text/javascript" id="maid-script" src="https://unpkg.com/mermaid@9.0.0/dist/mermaid.min.js"></script><script>if (window.mermaid) {
  var options = JSON.parse(document.getElementById('maid-script').getAttribute('mermaidoptioins'));
  mermaid.initialize(options);
}</script></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const loadMathjax = () => {
    if (!window.MathJax) {
      window.MathJax = {
        loader: {
          load: [
            // Four font extension packages (optional)
            //- '[tex]/bbm',
            //- '[tex]/bboldx',
            //- '[tex]/dsfont',
            '[tex]/mhchem'
          ],
          paths: {
            'mathjax-newcm': '[mathjax]/../@mathjax/mathjax-newcm-font',

            //- // Four font extension packages (optional)
            //- 'mathjax-bbm-extension': '[mathjax]/../@mathjax/mathjax-bbm-font-extension',
            //- 'mathjax-bboldx-extension': '[mathjax]/../@mathjax/mathjax-bboldx-font-extension',
            //- 'mathjax-dsfont-extension': '[mathjax]/../@mathjax/mathjax-dsfont-font-extension',
            'mathjax-mhchem-extension': '[mathjax]/../@mathjax/mathjax-mhchem-font-extension'
          }
        },
        output: {
          font: 'mathjax-newcm',
        },
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          tags: 'none',
          packages: {
            '[+]': [
              'mhchem'
            ]
          }
        },
        chtml: {
          scale: 1.1
        },
        options: {
          enableMenu: true,
          menuOptions: {
            settings: {
              enrich: false  // Turn off Braille and voice narration text automatic generation
            }
          },
          renderActions: {
            findScript: [10, doc => {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/)
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
                const text = document.createTextNode('')
                node.parentNode.replaceChild(text, node)
                math.start = {node: text, delim: '', n: 0}
                math.end = {node: text, delim: '', n: 0}
                doc.math.push(math)
              }
            }, '']
          }
        }
      }

      const script = document.createElement('script')
      script.src = 'https://unpkg.com/mathjax@4.0.0/tex-mml-chtml.js'
      script.id = 'MathJax-script'
      script.async = true
      document.head.appendChild(script)
    } else {
      MathJax.startup.document.state(0)
      MathJax.texReset()
      MathJax.typesetPromise()
    }
  }

  btf.addGlobalFn('encrypt', loadMathjax, 'mathjax')
  window.pjax ? loadMathjax() : window.addEventListener('load', loadMathjax)
})()</script><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://unpkg.com/mermaid@11.11.0/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start -->
    <script src="/js/gallery.js" async></script>
<!-- hexo injector body_end end -->
        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 2,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z\d\-\.\+]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(t.test(e.href)||r.test(e.href))&&(e.href=a.dataset.original)})});</script><script>(r=>{r.imageLazyLoadSetting.processImages=t;var a=r.imageLazyLoadSetting.isSPA,o=r.imageLazyLoadSetting.preloadRatio||1,d=i();function i(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(t){(a||t)&&(d=i());for(var e,n=0;n<d.length;n++)0<=(e=(e=d[n]).getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(r.innerHeight*o||document.documentElement.clientHeight*o)&&(()=>{var t,e,a,o,i=d[n];e=function(){d=d.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).dataset.loaded||(t.hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(a=new Image,o=t.getAttribute("data-original"),a.onload=function(){t.src=o,t.removeAttribute("data-original"),t.setAttribute("data-loaded",!0),e&&e()},a.onerror=function(){t.removeAttribute("data-original"),t.setAttribute("data-loaded",!1),t.src=o},t.src!==o&&(a.src=o)))})()}function e(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",e),r.addEventListener("resize",e),r.addEventListener("orientationchange",e)})(this);</script></body></html>